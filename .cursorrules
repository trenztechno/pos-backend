# Project: Offline-First Billing App
# Architecture: Backup & Sync Mode

## GLOBAL RULES
1. **Offline Authority:** The mobile device's local database is the source of truth for Sales. The Server is the source of truth for Inventory.
2. **UUIDs:** Never use integer IDs. Always generate UUIDs (v4) on the client side.
3. **No Sales API Latency:** Creating a bill must never block for network requests. Save to SQLite -> Print -> Background Sync later.

## FRONTEND GUIDELINES
- Use **SQLite** (expo-sqlite or react-native-quick-sqlite) for data storage.
- **Billing Logic:** All tax calculations (GST), subtotals, and discounts happen in JS functions on the phone.
- **Printing:** Use Bluetooth Printer libraries directly. No backend involvement.
- **Sync Logic:**
  - `Inventory`: Poll generic GET /items every X minutes or on "Refresh". Push changes via POST immediately.
  - `Sales`: Accumulate locally. Push to POST /backup/sync only when `is_synced == false`.

## BACKEND GUIDELINES
- The backend is a "Passive Receiver" for sales data. Do not validate business logic (like checking if stock existed at time of sale), just save the bill blob.
- The backend IS the "Active Master" for Inventory. ensure concurrent updates (Last-Write-Wins based on timestamp).

## API ROUTES
- GET /items (Sync)
- POST /items (Instant Add)
- PATCH /items/:id/status (Instant Stock Toggle)
- POST /backup/sync (Batch Sales Upload)
- POST /settings/push (Config Backup)